<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<meta name="author" content="The WebAnno Team">
<title>WebAnno Developer Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>WebAnno Developer Guide</h1>
<div class="details">
<span id="author" class="author">The WebAnno Team</span><br>
<span id="revnumber">version 3.6.11</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#sect_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_git">GIT</a></li>
<li><a href="#_setting_up_the_for_development_in_eclipse">Setting up the for development in Eclipse</a>
<ul class="sectlevel3">
<li><a href="#_use_a_jdk">Use a JDK</a></li>
<li><a href="#_eclipse_plug_ins">Eclipse Plug-ins</a></li>
</ul>
</li>
<li><a href="#_eclipse_workspace_settings">Eclipse Workspace Settings</a></li>
<li><a href="#_importing_webanno_into_the_workspace">Importing WebAnno into the Workspace</a></li>
<li><a href="#_eclipse_tomcat_integration">Eclipse Tomcat Integration</a></li>
<li><a href="#_checkstyle_and_formatting">Checkstyle and Formatting</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_modules">Modules</a>
<ul class="sectlevel1">
<li><a href="#_documents">Documents</a>
<ul class="sectlevel2">
<li><a href="#_source_documents">Source documents</a></li>
<li><a href="#_annotation_documents">Annotation documents</a></li>
</ul>
</li>
<li><a href="#_annotation_schema">Annotation Schema</a>
<ul class="sectlevel2">
<li><a href="#_layers">Layers</a>
<ul class="sectlevel3">
<li><a href="#_span_layer">Span layer</a></li>
<li><a href="#_relation_layer">Relation layer</a></li>
</ul>
</li>
<li><a href="#_features">Features</a></li>
<li><a href="#_layers_2">Layers</a>
<ul class="sectlevel3">
<li><a href="#_layers_behaviors">Layers Behaviors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_annotation_editor">Annotation Editor</a>
<ul class="sectlevel2">
<li><a href="#_paging">Paging</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendices">Appendices</a>
<ul class="sectlevel1">
<li><a href="#sect_systemproperties">System Properties</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document targets developers working on WebAnno.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Switch to the new annotation tool <a href="https://inception-project.github.io">INCEpTION</a>!</strong> It is like WebAnno but way more modern and with a ton of additional features and improvements. WebAnno has grown old and does not even run anymore on Java versions 16 and higher. In most cases you can simply export your projects from WebAnno, import them into INCEpTION and continue to work. So, don&#8217;t hesitate and give it a try!
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="_introduction" class="sect0"><a class="anchor" href="#_introduction"></a>Introduction</h1>
<div class="sect1">
<h2 id="sect_setup"><a class="anchor" href="#sect_setup"></a>Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_git"><a class="anchor" href="#_git"></a>GIT</h3>
<div class="paragraph">
<p>All sources files are stored using UNIX line endings. If you develop on Windows, you have to
set the <code>core.autocrlf</code> configuration setting to <code>input</code> to avoid accidentally submitting Windows
line endings to the repository. Using <code>input</code> is a good strategy in most cases, thus you should
consider setting this as a global (add <code>--global</code>) or even as a system (<code>--system</code>) setting.</p>
</div>
<div class="listingblock">
<div class="title">Configure git line ending treatment</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">C:\&gt; git config --global core.autocrlf input</code></pre>
</div>
</div>
<div class="paragraph">
<p>After changing this setting, best do a fresh clone and check-out of the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_the_for_development_in_eclipse"><a class="anchor" href="#_setting_up_the_for_development_in_eclipse"></a>Setting up the for development in Eclipse</h3>
<div class="paragraph">
<p>This is a guide to setting up a development environment using Eclipse on Mac OS X. The
procedure should be similar for other operation systems.</p>
</div>
<div class="paragraph">
<p>First, you need to follow some steps of the user [InstallationGuide installation guide].
It is recommended to configure a MySQL-server.</p>
</div>
<div class="paragraph">
<p>We recommend you start from a <strong>Eclipse IDE for Java Developers</strong> package.</p>
</div>
<div class="sect3">
<h4 id="_use_a_jdk"><a class="anchor" href="#_use_a_jdk"></a>Use a JDK</h4>
<div class="paragraph">
<p>On Linux or OS X, the following setting is not necessary. Having a full JDK installed on your
system is generally sufficient. You can skip on to the next section.</p>
</div>
<div class="paragraph">
<p>On Windows, you need to edit the <code>eclipse.ini</code> file and directly before the <code>-vmargs</code> line, you
have to add the following two lines. Mind to replace <code>C:/Program Files/Java/jdk1.8.0_144</code> with the actual
location of the JDK on your system. Without this, Eclipse will complain that the
<code>jdk.tools:jdk.tools</code> artifact would be missing.</p>
</div>
<div class="listingblock">
<div class="title">Force Eclipse to run on a JDK</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">-vm
C:/Program Files/Java/jdk1.8.0_144/jre/bin/server/jvm.dll</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_eclipse_plug_ins"><a class="anchor" href="#_eclipse_plug_ins"></a>Eclipse Plug-ins</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Maven Integration:</strong> m2e , already comes pre-installed with the Eclipse IDE for Java Developers.
If you use another edition of Eclipse which does not have m2e pre-installed, go to <strong>Help&#8594;Install
New Software</strong>, select "--All available sites--" and choose <strong>Collaboration &#8594; m2e - Maven Integration
for Eclipse</strong></p>
</li>
<li>
<p><strong>Apache UIMA tools:</strong> Update site: <code><a href="http://www.apache.org/dist/uima/eclipse-update-site/" class="bare">http://www.apache.org/dist/uima/eclipse-update-site/</a></code></p>
</li>
<li>
<p><strong>Eclipse Web Development Tooling:</strong> go to <strong>Help&#8594;Install New Software</strong>, select "--All available
sites--" and select the following plug-ins for installation from the section <strong>Web, XML, Java EE
and OSGi Enterprise Development</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Eclipse Java Web Developer Tools</p>
</li>
<li>
<p>Eclipse Web Developer Tools</p>
</li>
<li>
<p>Eclipse XML Editors and Tools</p>
</li>
<li>
<p>JST Server Adapters</p>
</li>
<li>
<p>JST Server Adapters Extensions</p>
</li>
<li>
<p>JST Server UI</p>
</li>
<li>
<p>m2e-wtp - Maven Integration for WTP</p>
</li>
<li>
<p>WST Server Adapters</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eclipse_workspace_settings"><a class="anchor" href="#_eclipse_workspace_settings"></a>Eclipse Workspace Settings</h3>
<div class="ulist">
<ul>
<li>
<p>You should check that Text file encoding is UTF-8  in <strong>Preferences &#8594; General &#8594; Workspace</strong> of
your Eclipse install.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_importing_webanno_into_the_workspace"><a class="anchor" href="#_importing_webanno_into_the_workspace"></a>Importing WebAnno into the Workspace</h3>
<div class="paragraph">
<p>Checkout out the WebAnno git repository with your favorite git client. If you use the command-line
client, use the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">$ git clone https://github.com/webanno/webanno.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Eclipse, go to <strong>File &#8594; Import</strong>, choose <strong>Existing Maven projects</strong>, and select the folder to which
you have cloned WebAnno. Eclipse should automatically detect all modules.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eclipse_tomcat_integration"><a class="anchor" href="#_eclipse_tomcat_integration"></a>Eclipse Tomcat Integration</h3>
<div class="paragraph">
<p>Download Apache Tomcat from <code><a href="http://tomcat.apache.org/" class="bare">http://tomcat.apache.org/</a></code> (we&#8217;re using version 8.5). Then, you need to
add the Tomcat server to your runtime configuration. Go to preferences and go to
<strong>Servers &#8594; Runtime environments</strong>:</p>
</div>
<div class="paragraph">
<p>When prompted for an installation path, specify the folder where you extracted (or installed) Apache
Tomcat v8.5 into.</p>
</div>
<div class="paragraph">
<p>Change the runtime configuration for the project. On the left side of the dialog, you should now be
able to select Apache Tomcat. Change its VM arguments and include the definition
<code>-Dwebanno.home="/srv/webanno"</code> to specify the home directory for the application. Also add
<code>-Dwicket.core.settings.general.configuration-type=development</code> to enable the development mode.
This adds additional debugging features to the UI and disables UI caches.</p>
</div>
<div class="paragraph">
<p>Head to the servers pane. If you cannot locate it in your eclipse window, add it by going to
<strong>Window &#8594; Show View &#8594; Other&#8230;&#8203;</strong> and select <strong>Servers</strong>. Right click on <strong>Tomcat v8.5 localhost</strong> and
click on <strong>Add and remove&#8230;&#8203;</strong>:</p>
</div>
<div class="paragraph">
<p>WebAnno should now be configured to start with Tomcat.</p>
</div>
<div class="paragraph">
<p>In the <strong>Servers</strong> view, double-click on the Tomcat instance you have configured. Activate the
checkbox <strong>Serve modules without publishing</strong>. Go to the <strong>Modules</strong> tab, select the WebAnno module
and disable auto-reloading. After these changes, you will have to manually restart the Tomcat
server in order for changes to Java class files to take effect. However, as a benefit, changes to
HTML, CSS or JavaScript files take effect immediately and you just have to refresh the browser to
see the changes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checkstyle_and_formatting"><a class="anchor" href="#_checkstyle_and_formatting"></a>Checkstyle and Formatting</h3>
<div class="paragraph">
<p>We use a style for formatting the source code in WebAnno. Our approach consists of two steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DKPro code formatting profile - the profile configures your IDE to auto-format the code according to
our guidelines as you go.</p>
</li>
<li>
<p>Checkstyle - this tool is used to check if the source code is actually formatted according to our
guidelines. It is run as part of a Maven build and the build fails if the code is not formatted
properly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a brief summary of the formatting rules:
* no tabs, only spaces
* indenting using 4 spaces in Java files and 2 spaces in XML files
* maximum 100 characters per line (with a few exceptions)
* curly braces on the next line for class/method declarations, same line for logic blocks (if/for/&#8230;&#8203;)
* parameter names start with <code>a</code> (e.g. <code>void foo(String aValue)</code>)</p>
</div>
<div class="paragraph">
<p>First, obtain the DKPro code formatting profile from the <a href="https://dkpro.github.io/contributing/">DKPro website</a> (Section "Code style"). In Eclipse, go to <strong>Preferences &#8594; Java &#8594; Code Style &#8594; Formatter</strong> to import the file. Apparently, the files can also be used with IntelliJ via the [Eclipse Code Formatter](<a href="https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter" class="bare">https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter</a>) plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The parameter prefix <code>a</code> needs to be configured manually. In Eclipse go to
       <strong>Preferences &#8594; Java &#8594; Code Style</strong> set the <strong>prefix list</strong> column in the <strong>parameters</strong> row to <code>a</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Second, install the Checkstyle plugin for Eclipse as well as the Maven Checkstyle plugin for Eclipse.
These plugins make Eclipse automatically pick up the checkstyle configuration from the Maven project
and highlight formatting problems directly in the source code editor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install <strong>Checkstyle Eclipse plugin</strong> from here: <code><a href="http://eclipse-cs.sourceforge.net" class="bare">http://eclipse-cs.sourceforge.net</a></code></p>
</li>
<li>
<p>Install the <strong>Checkstyle configuration plugin for M2Eclipse</strong> from here: <code><a href="http://m2e-code-quality.github.com/m2e-code-quality/site/latest/" class="bare">http://m2e-code-quality.github.com/m2e-code-quality/site/latest/</a></code></p>
</li>
<li>
<p>Select all WebAnno projects, right click and do a <strong>Maven &#8594; Update project</strong></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Should the steps mentioned above not have been sufficient, close all the WebAnno projects
      in Eclipse, then remove them form the workspace (not from the disk), delete any <code>.checkstyle</code> files
      in the WebAnno modules, and then re-import them into Eclipse again using <strong>Import&#8594;Existing Maven
      projects</strong>. During the project import, the Checkstyle configuration plugin for M2Eclipse should
      properly set up the <code>.checkstyle</code> files and activate checkstyle.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="_modules" class="sect0"><a class="anchor" href="#_modules"></a>Modules</h1>
<div class="sect1">
<h2 id="_documents"><a class="anchor" href="#_documents"></a>Documents</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_source_documents"><a class="anchor" href="#_source_documents"></a>Source documents</h3>
<div class="paragraph">
<p>The original document uploaded by a user into a project. The document is preserved in its original
format.</p>
</div>
</div>
<div class="sect2">
<h3 id="_annotation_documents"><a class="anchor" href="#_annotation_documents"></a>Annotation documents</h3>
<div class="paragraph">
<p>Annotations made by a particular user on a document. The annotation document is persisted separately
from the original document. There is one annotation document per user per document. Within the tool,
a CAS data structure is used to represent the annotation document.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annotation_schema"><a class="anchor" href="#_annotation_schema"></a>Annotation Schema</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_layers"><a class="anchor" href="#_layers"></a>Layers</h3>
<div class="paragraph">
<p>The layers mechanism allows supporting different types of annotation layers, e.g. span layers,
relation layers or chain layers. It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>LayerSupport</code> interface provides the API for implementing layer types.</p>
</li>
<li>
<p>The <code>LayerSupportRegistry</code> interface and its default implementation <code>LayerSupportRegistryImpl</code>
serve as an access point to the different supported layer types.</p>
</li>
<li>
<p>The <code>LayerType</code> class which represents a short summary of a supported layer type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of layer, create a Spring component class which implements the
<code>LayerSupport</code> interface. Note that a single layer support class can handle multiple layer types.
However, it is generally recommended to implement a separate layer support for every layer type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new layer type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedLayerTypes()</code> to return a list of all the supported layer types handled by the new
layer support. This values returned here are used to populate the layer type choice when creating
a new layer in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateTypes(TypeSystemDescription, AnnotationLayer)</code> to generate the UIMA type system for the given
annotation layer. This is a partial type system which is merged by the application with the
type systems produced by other layer supports as well as with the base type system of the
application itself (i.e. the DKPro Core type system and the internal types).</p>
</li>
<li>
<p><code>getRenderer(AnnotationLayer)</code> to return an early-stage renderer for the annotations on the
given layer.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The concept of layers is not yet fully modularized. Many parts of the application will only
      know how to deal with specific types of layers. Adding a new layer type should not crash the
      application, but it may also not necessarily be possible to actually use the new layer. In
      particular, changes to the TSV format may be required to support new layer types.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_span_layer"><a class="anchor" href="#_span_layer"></a>Span layer</h4>
<div class="paragraph">
<p>A span layer allows to create annotations over spans of text.</p>
</div>
<div class="paragraph">
<p>If <code>attachType</code> is set, then an annotation can only be created over the same span on which an
annotation of the specified type also exists. For span layers, setting <code>attachFeature</code> is mandatory
if a <code>attachType</code> is defined. The <code>attachFeature</code> indicates the feature on the annotation of the
<code>attachType</code> layer which is to be set to the newly created annotation.</p>
</div>
<div class="paragraph">
<p>For example, the <code>Lemma</code> layer has the <code>attachType</code> set to <code>Token</code> and the <code>attachFeature</code> set to
<code>lemma</code>. This means, that a new lemma annotation can only be created where a token already exists
and that the <code>lemma</code> feature of the token will point to the newly created lemma annotation.</p>
</div>
<div class="paragraph">
<p>Deleting an annotation that has other annotations attached to it will also cause the attached
annotations to be deleted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This case is currently not implemented because it is currently not allowed to
      create spans that attach to other spans. The only span type for which this is relevant
      is the <code>Token</code> type which cannot be deleted.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_relation_layer"><a class="anchor" href="#_relation_layer"></a>Relation layer</h4>
<div class="paragraph">
<p>A relation layer allows to draw arcs between span annotations. The <code>attachType</code> is mandatory for
relation types and specifies which type of annotations arcs can be drawn between.</p>
</div>
<div class="paragraph">
<p>Arcs can only be drawn between annotations of the same layer. It is not possible to draw an arc
between two spans of different layers.</p>
</div>
<div class="paragraph">
<p>Only a single relation layer can attach to any given span layer.</p>
</div>
<div class="paragraph">
<p>If the <code>annotation_feature</code> is set, then the arc is not drawn between annotations of the layer
indicated by <code>annotation_type</code>, but between annotations of the type specified by the feature. E.g.
for a dependency relation layer, <code>annotation_type</code> would be set to <code>Token</code> and <code>annotation_feature</code>
to <code>pos</code>. The <code>Token</code> type has no visual representation in the UI. However, the <code>pos</code> feature points
to a <code>POS</code> annotation, which is rendered and between which the dependency relation arcs are then
drawn.</p>
</div>
<div class="paragraph">
<p>Deleting an annotation that is the endpoint of a relation will also delete the relation. In the case
that <code>annotation_feature</code>, this is also the case if the annotation pointed to is deleted. E.g. if
a POS annotation in the above example is deleted, then the attaching relation annotations are also
deleted.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>Features</h3>
<div class="paragraph">
<p>The features mechanism allows supporting different types of annotation features, e.g. string
features, numeric features, boolean features, link features, etc.
It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>FeatureSupport</code> interface provides the API for implementing feature types.</p>
</li>
<li>
<p>The <code>FeatureSupportRegistry</code> interface and its default implementation <code>FeatureSupportRegistryImpl</code>
serve as an access point to the different supported feature types.</p>
</li>
<li>
<p>The <code>FeatureType</code> class which represents a short summary of a supported feature type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of feature, create a Spring component class which implements the
<code>FeatureSupport</code> interface. Note that a single featre support class can handle multiple feature types.
However, it is generally recommended to implement a separate layer support for every feature type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new feature type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedFeatureTypes()</code> to return a list of all the supported feature types handled by the new
feature support. This values returned here are used to populate the feature type choice when
creating a new feature in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateFeature(TypeSystemDescription, TypeDescription, AnnotationFeature)</code> add the UIMA feature
definition for the given annotation feature to the given type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the new feature has special configuration settings, then implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>readTraits(AnnotationFeature)</code> to extract the special settings form the given annotation feature
definition. It is expected that the traits are stored as a JSON string in the <code>traits</code> field
of <code>AnnotationFeature</code>. If the <code>traits</code> field is <code>null</code>, a new traits object must be returned.</p>
</li>
<li>
<p><code>writeTraits(AnnotationFeature, T)</code> to encode the layer-specific traits object into a JSON string
and store it in the <code>traits</code> field of <code>AnnotationFeature</code>.</p>
</li>
<li>
<p><code>createTraitsEditor(String, IModel&lt;AnnotationFeature&gt;</code> to create a custom UI for the special feature
settings. This UI is shown below the standard settings in the feature detail editor on the
<strong>Layers</strong> tab of the project settings.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_layers_2"><a class="anchor" href="#_layers_2"></a>Layers</h3>
<div class="paragraph">
<p>The layers mechanism allows supporting different types of annotation layers, e.g. span layers,
relation layers or chain layers. It consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>LayerSupport</code> interface provides the API for implementing layer types.</p>
</li>
<li>
<p>The <code>LayerSupportRegistry</code> interface and its default implementation <code>LayerSupportRegistryImpl</code>
serve as an access point to the different supported layer types.</p>
</li>
<li>
<p>The <code>LayerType</code> class which represents a short summary of a supported layer type. It is used
when selecting the type of a feature in the UI.</p>
</li>
<li>
<p>The <code>TypeAdapter</code> interface provides methods to create, manipulate or delete annotations on the
given type of layer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new type of layer, create a Spring component class which implements the
<code>LayerSupport</code> interface. Note that a single layer support class can handle multiple layer types.
However, it is generally recommended to implement a separate layer support for every layer type.
Implement the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getId()</code> to return a unique identifier for the new layer type. Typically the Spring bean name
is returned here.</p>
</li>
<li>
<p><code>getSupportedLayerTypes()</code> to return a list of all the supported layer types handled by the new
layer support. This values returned here are used to populate the layer type choice when creating
a new layer in the project settings.</p>
</li>
<li>
<p><code>accepts(AnnotationLayer)</code> to return <code>true</code> for any annotation layer that is handled by the new
layer support. I.e. <code>AnnotationLayer.getType()</code> must return a layer type identifier that was produced
by the given layer support.</p>
</li>
<li>
<p><code>generateTypes(TypeSystemDescription, AnnotationLayer)</code> to generate the UIMA type system for the given
annotation layer. This is a partial type system which is merged by the application with the
type systems produced by other layer supports as well as with the base type system of the
application itself (i.e. the DKPro Core type system and the internal types).</p>
</li>
<li>
<p><code>getRenderer(AnnotationLayer)</code> to return an early-stage renderer for the annotations on the
given layer.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The concept of layers is not yet fully modularized. Many parts of the application will only
      know how to deal with specific types of layers. Adding a new layer type should not crash the
      application, but it may also not necessarily be possible to actually use the new layer. In
      particular, changes to the TSV format may be required to support new layer types.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_layers_behaviors"><a class="anchor" href="#_layers_behaviors"></a>Layers Behaviors</h4>
<div class="paragraph">
<p>Layer behaviors allow to customize the way a layer of a particular span behaves, e.g. whether
a span is allowed to cross sentence boundaries, whether it anchors to characters or tokens,
whether the tree of relations among annotations is valid, etc.
The layer behaviors tie in with the specific <code>LayerSupport</code> implementations. The mechanism itself
consists of the following classes and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>LayerBehavior</code> interface provides the API necessary for registering new behaviors. There are
abstract classes such as <code>SpanLayerBehavior</code> or <code>RelationLayerBehavior</code> which provide the APIs for
behaviors of specific layer types.</p>
</li>
<li>
<p>The <code>LayerBehaviorRegistry</code> and its default implementation <code>LayerBehaviorRegistryImpl</code>
serve as an access point to the different supported layer behaviors.
Any Spring component implementing the <code>LayerBehavior</code> interface is
loaded, and will be named in the logs when the web app is launched. The classpath scanning
used to locate Spring beans is limited to specific Java packages, e.g. any packages starting
with <code>de.tudarmstadt.ukp.clarin.webanno</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A layer behavior may have any of the following responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that new annotations that are created conform with the behavior. This is done via the
<code>onCreate</code> method. If the annotation to be created does not conform with the behavior, the
method can cancel the creation of the annotation by throwing an <code>AnnotationException</code>.</p>
</li>
<li>
<p>Highlight annotations not conforming with the behavior. This is relevant when importing
pre-annotated files or when changing the behavior configuration of an existing layer. The
relevant method is <code>onRender</code>. If an annotation does not conform with the behavior, a error
marker should be added for problematic annotation. This is done by creating a <code>VComment</code>
which attaches an error message to a specified visual element, then adding that to the
repsonse <code>VDocument</code>. Note that <code>onRender</code> is unlike <code>onCreate</code> and <code>onValidate</code> in that it
only has indirect access to the CAS: it is passed a mapping from <code>AnnotationFS</code> instances to
their corresponding visual elements, and can use <code>.getCAS()</code> on the FS. The annotation layer
can be identified from the visual element with <code>.getLayer().getName()</code>.</p>
</li>
<li>
<p>Ensure that documents being marked as <strong>finished</strong> conform with the behavior. This is done
via the <code>onValidate</code> method, which returns a list of <code>LogMessage, AnnotationFS</code> pairs
to report errors associated with each FS.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annotation_editor"><a class="anchor" href="#_annotation_editor"></a>Annotation Editor</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_paging"><a class="anchor" href="#_paging"></a>Paging</h3>
<div class="paragraph">
<p>Typically, an annotation editor only shows a a part of a document on screen to allow working with
large files without running into performance problems during rendering.
The paging strategy defines how a document is divided into the units (e.g. lines, sentences,
paragraphs, pages, etc.) from which the visible part of the document is constructed. The <code>AnnotationEditorFactory.initState()</code> method is intended to set up the editor state to be compatible
with the editor. In particular, it is the place where the editor can inject its paging strategy.
Contrary to many other modularized parts of the code, paging strategies are not Spring beans but
simple stateless and serializable Java classes.</p>
</div>
<div class="paragraph">
<p>There are presently two paging strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SentenceOrientedPagingStrategy</code> - divides the document into sentences using the <code>Sentence</code> annotations
present in the CAS.</p>
</li>
<li>
<p><code>LineOrientedPagingStrategy</code> - divides the document into lines considering using the newline character
(LF, dec: 10, hex: 0A) as a line separator.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>PagingStrategy</code> has to implement three methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>List&lt;Unit&gt; units(CAS, n, m)</code> to extract units <strong>n</strong> through <strong>m</strong> from the given CAS. If the value
provided for <strong>m</strong> is greater than the number of units in the document, the returned list simply
contains the maximum available units. If <strong>n</strong> is greater than the number of available units, an
empty list is returned.</p>
</li>
<li>
<p><code>createPositionLabel(&#8230;&#8203;)</code> creates a UI element displaying the current position within the document
as well as which document is currently opened.</p>
</li>
<li>
<p><code>createPageNavigator(&#8230;&#8203;)</code> creates a UI element to navigate through the pages. For most cases, the
provided <code>DefaultPagingNavigator</code> should be fine.</p>
</li>
<li>
<p>(optional) <code>unitCount(&#8230;&#8203;)</code> fetches the number of units in the given CAS. It is usually faster to
provide a special implementation for this method than to rely on the default implementation which
resorts to calling <code>units(&#8230;&#8203;).size()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If an annotation editor needs access to the visible units (e.g. to split spans overlapping units
into multiple ranges), it can call <code>AnnotatorState.getVisibleUnits()</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="_appendices" class="sect0"><a class="anchor" href="#_appendices"></a>Appendices</h1>
<div class="sect1">
<h2 id="sect_systemproperties"><a class="anchor" href="#sect_systemproperties"></a>System Properties</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">wicket.core.settings.general.configuration-type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable Wicket debug mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">development</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.6.11<br>
Last updated 2021-12-23 15:23:36 +0100
</div>
</div>
</body>
</html>